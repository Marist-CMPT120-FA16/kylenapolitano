<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Desert Adventure</title>
<!--
Kyle Napolitano
10/26/2016
Project 4
-->
  <script type="text/javascript" src="file:///Users/Kyle/Documents/locations.js"></script>
  <script>
  var currentLoc = 0;
  var score = 0;
  var navigationErrorCount = 0;
  var sarcasmThreshold = 5;
  var hasVisitedLoc0 = false;
  var hasVisitedLoc1 = false;
  var hasVisitedLoc2 = false;
  var hasVisitedLoc3 = false;
  var hasVisitedLoc4 = false;
  var hasVisitedLoc5 = false;
  var hasVisitedLoc6 = false;
  var hasVisitedLoc7 = false;
  var hasVisitedLoc8 = false;
  var hasVisitedLoc9 = false;
	  
  var swordTaken = false;
  var mapTaken = false;
  var flashlightTaken = false;
  var items = ["water", "food"];
    
    // Init.    
    function init(){
        look();
     }
    
    // Button Functions
    function btnNorth_click() {
        if (currentLoc === 0) {
            currentLoc = 1;
            document.getElementById("northBtn").disabled = true;
            look();               
      } else if(currentLoc === 4) {
        	currentLoc = 5;
        	document.getElementById("eastBtn").disabled = true;
        	document.getElementById("southBtn").disabled = true;
        	look();
      } else if(currentLoc === 7) {
          currentLoc = 8;
          document.getElementById("southBtn").disabled = true;
          document.getElementById("westBtn").disabled = false;
          look();
      } else {
      		navigationError();
       	}            
     }

    
    function btnSouth_click() {
        if (currentLoc === 2) {
           currentLoc = 3;
           document.getElementById("westBtn").disabled = false;
           document.getElementById("northBtn").disabled = true;
           look();               
      } else if(currentLoc === 6) {
          currentLoc = 7
          document.getElementById("westBtn").disabled = true;
          look();
      } else {
        	navigationError();	 
       	}           
     }
    
    function btnEast_click() {
        if (currentLoc === 1) {
           currentLoc = 2;
           document.getElementById("northBtn").disabled = false;
           document.getElementById("westBtn").disabled = true;
           look();               
      } else if(currentLoc === 8){
          currentLoc = 9
          document.getElementById("southBtn").disabled = false;
          document.getElementById("westBtn").disabled = true;
          look();
      }
        else {
        	navigationError();	
        }           
     }
    
    function btnWest_click() {
      if (currentLoc === 3) {
         currentLoc = 4;
         document.getElementById("southBtn").disabled = true;
         document.getElementById("northBtn").disabled = false;
         look();               
      } else if(currentLoc === 5) {
          currentLoc = 6;
          document.getElementById("eastBtn").disabled = false;
          document.getElementById("southBtn").disabled = false;
          document.getElementById("westBtn").disabled = true;
          look();  
      } else{
      	  navigationError();
       	}           
     }

     // Story / Location Description
     function look() {
         var message = "";
         switch(currentLoc) {
            case 0: message = start();
                    break; 
            case 1: message = cave();
                    break; 
            case 2: message = cave1();
                    break;
            case 3: message = jeff();
                    break;
            case 4: message = escape_cave();
                    break;
            case 5: message = journey_middletown();
            		    break;
            case 6: message = jeffs_warning();
            		    break;
            case 7: message = journey_start();
                    break;
            case 8: message = journey_woods();
                    break;
            case 9: message = journey_woods_prefight();
                    break;
            default: message ="";
         }
         checkScore();
         message = message + "\n" + "Score: " + score ;
         displayMessage(message);
      }

      function addItemList(input){
        var list = document.getElementById("itemList");
        var entry = document.createElement('li');
        entry.appendChild(document.createTextNode(input));
        list.appendChild(entry);
      }

      function take(input){
        if(currentLoc == 5 && input.toLowerCase() == 'map' && mapTaken == false){
          addItemList(input);
          mapTaken = true;
        }else if(currentLoc == 4 && input.toLowerCase() == 'sword' && swordTaken == false){
          addItemList(input);
          swordTaken = true;
        }else if(currentLoc == 7 && input.toLowerCase() == 'flashlight' && flashlightTaken == false){
          addItemList(input);
          flashlightTaken = true;
        }else{
          displayMessage("Item does not exist");
        }

      }
     
     function navigationError() {
         navigationErrorCount = navigationErrorCount + 1;
         if (navigationErrorCount < sarcasmThreshold) {
            displayMessage("You cannot go that way.");
         } else {
            displayMessage("You have been attacked by a wild creature and died! Better luck next time!");
         }          
      }
     // Score
     function checkScore() {
         if (! hasVisitedLoc0) {            
            if (currentLoc === 0) {
               score = 0;
               hasVisitedLoc0 = true;
            }
         } else if ( (!hasVisitedLoc1) && (currentLoc === 1) ) {            
               score = score + 5;
               hasVisitedLoc1 = true;
         } else if ( (!hasVisitedLoc2) && (currentLoc === 2) ) {            
               score = score + 5;
               hasVisitedLoc2 = true;
         } else if ( (!hasVisitedLoc3) && (currentLoc === 3) ) {            
               score = score + 5;
               hasVisitedLoc3 = true;
         } else if ( (!hasVisitedLoc4) && (currentLoc === 4) ) {            
               score = score + 5;
               hasVisitedLoc4 = true;
         } else if ( (!hasVisitedLoc5) && (currentLoc === 5) ) {            
               score = score + 5;
               hasVisitedLoc5 = true;
         } else if ( (!hasVisitedLoc6) && (currentLoc === 6) ) {            
               score = score + 5;
               hasVisitedLoc6 = true;      
         }  else if ( (!hasVisitedLoc7) && (currentLoc === 7) ) {            
               score = score + 5;
               hasVisitedLoc7 = true;
         }  else if ( (!hasVisitedLoc8) && (currentLoc === 8) ) {            
               score = score + 5;
               hasVisitedLoc8 = true;
         }  else if ( (!hasVisitedLoc9) && (currentLoc === 9) ) {            
               score = score + 5;
               hasVisitedLoc9 = true;
         }                  
      }
      
      //Update Display function
     function displayMessage(msg) {
         var target = document.getElementById("taMain");
         target.value = msg + "\n\n";
      }

      function help(){
        displayMessage("Try using N, S, E, W, n, s, e, w\nIf you find an item use the phrase 'take (item)'\nIf you get stuck don't give up! Keep trying!");
      }

      function btnGo_click(){
      	var input = document.getElementById('txtCommand').value;
      	if(input == 'n' || input == 'N'){
      		btnNorth_click(); //Run north command if input is N or n
      	}else if(input == 's' || input == 'S'){
      		btnSouth_click(); //Run south command if input is S or s
      	}else if(input == 'w' || input == 'W'){
      		btnWest_click(); //Run west command if input is W or w
      	}else if(input == 'e' || input == 'E'){
      		btnEast_click(); //Run east command if input is E or e
      	}else if(input.toLowerCase() == "help"){
            help();
        }else if(input.substring(0,4).toLowerCase() == "take"){
            take(input.substring(5,input.length));
        }else{
      		displayMessage('Invalid command! Try using N, S, E, W, n, s, e, w');
      	}
      }
	</script>
	</head>
	<body style="background-color:#ffcc00" onload="init()">
		<h1 style="text-align:center;font-size:300%;color:white;">Welcome to Desert Adventure!</h1>
		<p style="text-align:center;color:white;">Any Problems? Contact me <a href = "mailto:kyle.napolitano3@marist.edu">here.</a></p>
		<input type="button" 
               value="North"
               onclick="btnNorth_click();"
               id="northBtn">
        <input type="button" 
               value="South"
               onclick="btnSouth_click();"
               id="southBtn">
        <input type="button" 
               value="East"
               onclick="btnEast_click();"
               id="eastBtn">
        <input type="button" 
               value="West"
               onclick="btnWest_click();"
               id="westBtn">
               
        <br />
        <textarea id="taMain" rows="8" cols="32"></textarea>
        
        <br>
        Command:       
        <input type="text" 
               id = "txtCommand"
               name="txtCommand">

        <input type="button"
               value="Go" 
               onclick="btnGo_click();" />                           
       
        <br>
  	<h2>Items:</h2>
  	<ol id="itemList">
  	<li>water</li>
  	<li>food</li>
  	</ol>
  	<img src="gamemap.png" style="width:400;height:400;">
	</body>
</html>
